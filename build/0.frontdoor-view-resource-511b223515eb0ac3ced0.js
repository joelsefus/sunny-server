webpackJsonp([0],{86:function(t,e,n){var r,o,i,u,a,l,p,s,c,d,f,m,_,h,y,v,b,g=function(t,e){function n(){this.constructor=t}for(var r in e)w.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;d=n(8),r=n(2),i=n(159),v=n(21),m=v.capitalize,y=v.navigate_to_url,h=v.make_field_input_ui,b=n(10),_=n(82).form_group_input_div,l=r.Radio.channel("global"),p=r.Radio.channel("messages"),c=r.Radio.channel("sunny"),f=b.renderable(function(t){var e,n,r,o;for(console.log("_edit_form",t),o=["name","fullname"],n=0,r=o.length;n<r;n++)e=o[n],_({input_id:"input_"+e,label:m(e),input_attributes:{name:e,placeholder:e,value:t[e]}});return e="description",_({input_id:"input_"+e,input_type:"textarea",label:m(e),input_attributes:{name:e,placeholder:e},content:t[e]})}),u=b.renderable(function(t){return f(t),b.input(".btn.btn-default",{type:"submit",value:"Submit"}),b.div(".spinner.fa.fa-spinner.fa-spin")}),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.fieldList=["name","fullname"],e.prototype.ui=function(){var t;return t=h(this.fieldList),d.extend(t,{description:'textarea[name="description"]'}),t},e.prototype.updateModel=function(){var t,e,n,r,o;for(r=this.fieldList.concat(["description"]),o=[],e=0,n=r.length;e<n;e++)t=r[e],console.log("field",t,this.ui[t].val()),o.push(this.model.set(t,this.ui[t].val()));return o},e.prototype.onSuccess=function(t){var e;return e=t.get("name"),p.request("display-message",e+" saved successfully.","success"),y("#sunny")},e}(i),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.template=u,e.prototype.createModel=function(){return c.request("new-client")},e.prototype.saveModel=function(){var t,n;return t={success:function(t){return function(){return t.trigger("save:form:success",t.model)}}(this),error:function(t){return function(){return t.trigger("save:form:failure",t.model)}}(this)},n=c.request("client-collection"),n.add(this.model),e.__super__.saveModel.apply(this,arguments)},e}(o),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.template=u,e.prototype.createModel=function(){return this.model},e}(o),t.exports={NewClientView:s,EditClientView:a}},155:function(t,e,n){var r,o,i,u,a,l,p,s,c,d,f,m=function(t,e){function n(){this.constructor=t}for(var r in e)_.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},_={}.hasOwnProperty;o=n(2),a=n(4),r=n(158),d=n(21).navigate_to_url,f=n(48).show_modal,u=o.Radio.channel("global"),l=o.Radio.channel("messages"),c=o.Radio.channel("resources"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.template=r.ConfirmPageDeleteModal,e.prototype.ui={confirm_delete:"#confirm-delete-button",cancel_button:"#cancel-delete-button"},e.prototype.events=function(){return{"click @ui.confirm_delete":"confirm_delete"}},e.prototype.confirm_delete=function(){var t,e;return t=this.model.get("name"),e=this.model.destroy(),e.done(function(e){return function(){return l.request("display-message",t+" deleted.","success")}}(this)),e.fail(function(e){return function(){return l.request("display-message",t+" NOT deleted.","danger")}}(this))},e}(o.Marionette.ItemView),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.template=r.PageItem,e.prototype.ui={edit_page:".edit-page",delete_page:".delete-page",page_item:".page-item"},e.prototype.events=function(){return{"click @ui.edit_page":"edit_page","click @ui.delete_page":"delete_page"}},e.prototype.edit_page=function(){var t;return t=this.model.get("name"),d("#dbdocs/edit/"+t)},e.prototype.delete_page=function(){var t;return console.log("delete_page",this.model),t=new i({model:this.model}),f(t,!0)},e}(o.Marionette.ItemView),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.childView=p,e.prototype.template=r.PageList,e.prototype.childViewContainer="#pagecontainer",e.prototype.ui={make_new_page:"#makenewpage",new_page_name:"#newpagename"},e.prototype.events=function(){return{"click @ui.make_new_page":"make_new_page"}},e.prototype._show_modal=function(t,e){var n;return null==e&&(e=!1),n=u.request("main:app:get-region","modal"),n.backdrop=e,n.show(t)},e.prototype.make_new_page=function(){var t;return t=this.ui.new_page_name.val(),d("#dbdocs/newpage")},e}(o.Marionette.CompositeView),t.exports=s},156:function(t,e,n){var r,o,i,u,a,l,p,s,c=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;r=n(2),a=n(4),o=n(171),p=n(21),s=p.remove_trailing_slashes,l=p.make_json_post,u=r.Radio.channel("global"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template=o.DefaultStaticDocumentTemplate,e}(r.Marionette.ItemView),t.exports={FrontDoorMainView:i}},157:function(t,e,n){var r,o,i,u,a,l,p=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;a=n(164),l=n(172),r=a.base_item_template("client"),i=a.base_list_template("client"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.template=r,e.prototype.item_type="client",e}(l.BaseItemView),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.childView=o,e.prototype.template=i,e.prototype.childViewContainer="#client-container",e.prototype.item_type="client",e}(l.BaseListView),t.exports=u},158:function(t,e,n){var r,o,i,u,a,l,p,s,c,d,f,m,_,h,y;y=n(10),f=n(47),h=n(83),_=h.navbar_collapse_button,c=h.dropdown_toggle,m=h.modal_close_button,d=n(82).form_group_input_div,s=n(21).capitalize,p=y.renderable(function(t){var e,n,r,o;for(o=["name","title","description"],n=0,r=o.length;n<r;n++)e=o[n],d({input_id:"input_"+e,label:s(e),input_attributes:{name:e,placeholder:e,value:t[e]},value:t.title});return y.div(".form-group",function(){return y.label(".control-label",{"for":"select_doctype"},"Doc Type"),y.select(".form-control",{name:"select_doctype"},function(){var e,n,r,o,i;for(o=["html","markdown"],i=[],e=0,n=o.length;e<n;e++)r=o[e],t.doctype===r?i.push(y.option({selected:null,value:r},r)):i.push(y.option({value:r},r));return i})})}),i=y.renderable(function(t){return p(t),y.div("#document-body",function(){return y.raw(t.data.attributes.body)}),y.input(".btn.btn-default",{type:"submit",value:"Update "+t.data.type})}),r=y.renderable(function(t){return p(t),y.div("#ace-editor",{style:"position:relative;width:100%;height:40em;"}),y.input(".btn.btn-default",{type:"submit",value:"Update "+t.data.type})}),a=y.renderable(function(t){var e;return e=".btn.btn-default.btn-xs",y.li(".page-item.list-group-item.row",function(){return y.div(".col-md-3.pull-left",function(){return y.a({href:"#dbdocs/view/"+t.name},t.name)}),y.div(".col-md-1.pull-right.button-group",function(){return y.button(".edit-page."+e+".btn-primary.fa.fa-edit"),y.button(".delete-page."+e+".btn-danger.fa.fa-close")})})}),l=y.renderable(function(){return y.button("#makenewpage.btn.btn-default",function(){return"new page"}),y.hr(),y.ul("#pagecontainer.list-group")}),o=y.renderable(function(t){return y.div(".modal-dialog",function(){return y.div(".modal-content",function(){return y.h3("Do you really want to delete "+t.name+"?"),y.div(".modal-body",function(){return y.div("#selected-children")}),y.div(".modal-footer",function(){return y.ul(".list-inline",function(){var t;return t="btn.btn-default.btn-sm",y.li("#confirm-delete-button",function(){return m("OK","check")}),y.li("#cancel-delete-button",function(){return m("Cancel")})})})})})}),u=y.renderable(function(t){return p(t),y.div("#ace-editor",{style:"position:relative;width:100%;height:40em;"}),y.input(".btn.btn-default",{type:"submit",value:"Add "+t.doctype}),y.div(".spinner.fa.fa-spinner.fa-spin")}),t.exports={AceEditNodeForm:r,PageItem:a,PageList:l,ConfirmPageDeleteModal:o,NewPageForm:u}},159:function(t,e,n){var r,o,i=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=n(160),r=function(t){function e(){return this.invalid=i(this.invalid,this),this.valid=i(this.valid,this),e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.valid=function(t,e,n){return this.$("[data-validation="+e+"]").parent().removeClass("has-error").addClass("has-success")},e.prototype.invalid=function(t,e,n,r){return this.failure(this.model),this.$("[data-validation="+e+"]").parent().removeClass("has-success").addClass("has-error")},e}(o),t.exports=r},160:function(t,e,n){var r,o,i,u,a=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;u=n(8),o=n(4),i=n(84),r=function(t){function e(){this.invalid=a(this.invalid,this),this.valid=a(this.valid,this),e.__super__.constructor.apply(this,arguments),this.listenTo(this,"render",this.hideActivityIndicator),this.listenTo(this,"render",this.prepareModel),this.listenTo(this,"save:form:success",this.success),this.listenTo(this,"save:form:failure",this.failure)}return l(e,t),e.prototype.delegateEvents=function(t){return this.ui=u.extend(this._baseUI(),u.result(this,"ui")),this.events=u.extend(this._baseEvents(),u.result(this,"events")),e.__super__.delegateEvents.call(this,t)},e.prototype.tagName="form",e.prototype._baseUI=function(){return{submit:'input[type="submit"]',activityIndicator:".spinner"}},e.prototype._baseEvents=function(){var t;return t={"change [data-validation]":this.validateField,"blur [data-validation]":this.validateField,"keyup [data-validation]":this.validateField},t["click "+this.ui.submit]=this.processForm,t},e.prototype.createModel=function(){throw new Error("implement #createModel in your FormView subclass to return a Backbone model")},e.prototype.prepareModel=function(){return this.model=this.createModel(),this.setupValidation()},e.prototype.validateField=function(t){var e,n;return e=$(t.target).attr("data-validation"),n=$(t.target).val(),this.model.preValidate(e,n)?this.invalid(this,e):this.valid(this,e)},e.prototype.processForm=function(t){return t.preventDefault(),this.showActivityIndicator(),this.updateModel(),this.saveModel()},e.prototype.updateModel=function(){throw new Error("implement #updateModel in your FormView subclass to update the attributes of @model")},e.prototype.saveModel=function(){var t;return t={success:function(t){return function(){return t.trigger("save:form:success",t.model)}}(this),error:function(t){return function(){return t.trigger("save:form:failure",t.model)}}(this)},this.model.save({},t)},e.prototype.success=function(t){return this.render(),this.onSuccess(t)},e.prototype.onSuccess=function(t){return null},e.prototype.failure=function(t){return this.hideActivityIndicator(),this.onFailure(t)},e.prototype.onFailure=function(t){return null},e.prototype.showActivityIndicator=function(){return this.ui.activityIndicator.show(),this.ui.submit.hide()},e.prototype.hideActivityIndicator=function(){return this.ui.activityIndicator.hide(),this.ui.submit.show()},e.prototype.setupValidation=function(){return Backbone.Validation.unbind(this),Backbone.Validation.bind(this,{valid:this.valid,invalid:this.invalid})},e.prototype.valid=function(t,e,n){return this.$("[data-validation="+e+"]").removeClass("invalid").addClass("valid")},e.prototype.invalid=function(t,e,n,r){return this.failure(this.model),this.$("[data-validation="+e+"]").removeClass("valid").addClass("invalid")},e}(Backbone.Marionette.ItemView),t.exports=r},164:function(t,e,n){var r,o,i,u,a,l,p,s;s=n(10),l=n(47),p=n(83).modal_close_button,a=n(82).form_group_input_div,u=n(21).capitalize,o=function(t){return s.renderable(function(e){var n;return n=".btn.btn-default.btn-xs",s.li(".list-group-item."+t+"-item",function(){return s.span(function(){return s.a({href:"#"+t+"/view/"+e.name},e.name)}),s.div(".btn-group.pull-right",function(){return s.button(".edit-item."+n+".btn-info.fa.fa-edit","edit"),s.button(".delete-item."+n+".btn-danger.fa.fa-close","delete")})})})},i=function(t){return s.renderable(function(e){return s.button("#new-"+t+".btn.btn-default",function(){return"Add New "+u(t)}),s.hr(),s.ul("#"+t+"-container.list-group")})},r=s.renderable(function(t){return s.div(".modal-dialog",function(){return s.div(".modal-content",function(){return s.h3("Do you really want to delete "+t.name+"?"),s.div(".modal-body",function(){return s.div("#selected-children")}),s.div(".modal-footer",function(){return s.ul(".list-inline",function(){var t;return t="btn.btn-default.btn-sm",s.li("#confirm-delete-button",function(){return p("OK","check")}),s.li("#cancel-delete-button",function(){return p("Cancel")})})})})})}),t.exports={base_item_template:o,base_list_template:i,ConfirmDeleteTemplate:r}},171:function(t,e,n){var r,o,i,u;u=n(10),i=n(47),o=u.renderable(function(t){return u.article(".document-view.content",function(){return u.h1(t.title),u.div(".body",function(){var e;return e=t.content,"markdown"===t.doctype&&(e=i(e)),u.raw(e)})})}),r=u.renderable(function(t){return u.article(".document-view.content",function(){return u.div(".body",function(){return u.raw(i(t.content))})})}),t.exports={DefaultViewTemplate:o,DefaultStaticDocumentTemplate:r}},172:function(t,e,n){var r,o,i,u,a,l,p,s,c,d,f,m=function(t,e){function n(){this.constructor=t}for(var r in e)_.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},_={}.hasOwnProperty;r=n(2),p=n(4),f=n(10),c=n(21).navigate_to_url,d=n(48).show_modal,a=n(164).ConfirmDeleteTemplate,l=r.Radio.channel("global"),s=r.Radio.channel("messages"),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.template=a,e.prototype.ui={confirm_delete:"#confirm-delete-button",cancel_button:"#cancel-delete-button"},e.prototype.events=function(){return{"click @ui.confirm_delete":"confirm_delete"}},e.prototype.confirm_delete=function(){var t,e;return t=this.model.get("name"),e=this.model.destroy(),e.done(function(e){return function(){return s.request("success",t+" deleted.")}}(this)),e.fail(function(e){return function(){return s.request("danger",t+" NOT deleted.")}}(this))},e}(r.Marionette.ItemView),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.ui={edit_item:".edit-item",delete_item:".delete-item",item:".list-item"},e.prototype.events=function(){return{"click @ui.edit_item":"edit_item","click @ui.delete_item":"delete_item"}},e.prototype.edit_item=function(){return c("#sunny/"+this.item_type+"s/edit/"+this.model.id)},e.prototype.delete_item=function(){var t;return t=new u({model:this.model}),d(t,!0)},e}(r.Marionette.ItemView),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.childViewContainer="#"+e.item_type+"-container",e.prototype.ui={make_new_item:"#new-"+e.item_type},e.prototype.events=function(){return{"click @ui.make_new_item":"make_new_item"}},e.prototype._show_modal=function(t,e){var n;return null==e&&(e=!1),n=l.request("main:app:get-region","modal"),n.backdrop=e,n.show(t)},e.prototype.make_new_item=function(){return c("#sunny/"+this.item_type+"/new")},e}(r.Marionette.CompositeView),t.exports={BaseItemView:o,BaseListView:i}}});