webpackJsonp([3],{0:function(n,t,e){var o,r,i,u,c,a,p,s,l,d,_,f,y;o=e(3),i=e(2),a=e(4),e(26),e(22),s=e(17),r=e(106),e(33),e(31),e(25),e(51),_=e(30),d=e(29),c=i.Radio.channel("global"),p=i.Radio.channel("messages"),u=i.Radio.channel("static-documents"),c.reply("main:app:appmodel",function(){return r}),c.reply("mainpage:init",function(n){var t;return t=c.request("main:app:object"),d(t),c.trigger("mainpage:displayed")}),c.on("appregion:navbar:displayed",function(){var n,t,e;return n=c.request("current-user"),e=new s.UserMenuView({model:n}),t=c.request("main:app:get-region","usermenu"),t.show(e)}),e(50),e(114),e(110),l=new a.Application,_(l,r),y=c.request("create-current-user-object","/api/dev/current-user"),f=y.fetch(),f.done(function(n){return function(){return l.start()}}(this)),f.fail(function(n){return function(){return console.log("bad things have happened")}}(this)),n.exports=l},106:function(n,t,e){var o,r,i,u,c,a,p,s,l,d;o=e(3),p=e(3),u=e(8),r=e(2),l=e(52),i=l.BaseAppModel,a=l.appregions,d=e(10),s=d.renderable(function(){return d.div("#navbar-view-container"),d.div(".container-fluid",function(){return d.div(".row",function(){return d.div(".col-sm-12",function(){return d.div("#messages")}),d.div("#main-content.col-sm-9"),d.div("#sidebar.col-sm-3.right-column")})}),d.div("#footer"),d.div("#modal")}),c=new i({hasUser:!0,brand:{name:"Sunny",url:"/"},layout_template:s,container:"container-fluid",applets:[{appname:"sunny",name:"Sunny",url:"#sunny"},{appname:"dbdocs",name:"DB Docs",url:"#dbdocs"}],regions:a}),n.exports=c},108:function(n,t,e){var o,r,i,u,c,a,p,s=function(n,t){function e(){this.constructor=n}for(var o in t)l.call(t,o)&&(n[o]=t[o]);return e.prototype=t.prototype,n.prototype=new e,n.__super__=t.prototype,n},l={}.hasOwnProperty;c=e(24).MainController,u=Backbone.Radio.channel("global"),a=Backbone.Radio.channel("messages"),p=Backbone.Radio.channel("resources"),r={html:"Document",markdown:"MarkDownDocument"},o={Document:"html",MarkDownDocument:"markdown"},i=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,n),t.prototype._get_doc_and_render_view=function(n){var t;return this._make_editbar(),t=new n({model:this.root_doc}),this._show_content(t)},t.prototype.list_pages=function(){return console.log("List Pages"),e.e(0,function(n){return function(){var t,o;return t=e(155),o=new t({collection:p.request("app-documents")}),n._show_content(o)}}(this))},t.prototype.edit_page=function(n){return e.e(1,function(t){return function(){var o;return o=e(85).EditPageView,t._show_content(new o({model:p.request("get-document",n)}))}}(this))},t.prototype.new_page=function(){return e.e(1,function(n){return function(){var t;return t=e(85).NewPageView,n._show_content(new t)}}(this))},t}(c),n.exports=i},109:function(n,t,e){var o,r,i,u,c,a,p,s,l,d,_,f,y=function(n,t){function e(){this.constructor=n}for(var o in t)h.call(t,o)&&(n[o]=t[o]);return e.prototype=t.prototype,n.prototype=new e,n.__super__=t.prototype,n},h={}.hasOwnProperty;o=e(3),d=e(8),r=e(2),p=e(4),i=e(32).BaseCollection,a=r.Radio.channel("global"),s=r.Radio.channel("messages"),l=r.Radio.channel("resources"),_="/api/dev/sitedocuments",u=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,n),t.prototype.idAttribute="name",t.prototype.urlRoot=_,t.prototype.defaults={name:"",doctype:"markdown",title:"",content:"",description:""},t}(r.Model),c=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,n),t.prototype.url=_,t.prototype.model=u,t}(i),f=new c,l.reply("app-documents",function(){return f}),l.reply("get-document",function(n){var t;return t=f.get(name),void 0===t?new u({id:n}):t}),l.reply("new-document",function(){return new u}),l.reply("add-document",function(n,t,e,o){var r;return r=l.request("app-documents"),new u}),n.exports={DocumentCollection:c}},110:function(n,t,e){var o,r,i,u,c,a=function(n,t){function e(){this.constructor=n}for(var o in t)p.call(t,o)&&(n[o]=t[o]);return e.prototype=t.prototype,n.prototype=new e,n.__super__=t.prototype,n},p={}.hasOwnProperty;o=e(23),r=e(108),e(109),i=Backbone.Radio.channel("global"),u=Backbone.Radio.channel("resources"),c=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,n),t.prototype.appRoutes={dbdocs:"list_pages","dbdocs/newpage":"new_page","dbdocs/edit/:name":"edit_page"},t}(o),i.reply("applet:dbdocs:route",function(){var n,t;return n=new r(i),n.root_doc=u.request("get-document","startdoc"),t=new c({controller:n})})},112:function(n,t,e){var o,r,i,u,c,a,p=function(n,t){function e(){this.constructor=n}for(var o in t)s.call(t,o)&&(n[o]=t[o]);return e.prototype=t.prototype,n.prototype=new e,n.__super__=t.prototype,n},s={}.hasOwnProperty;a=e(21),i=e(24).MainController,r=Backbone.Radio.channel("global"),u=Backbone.Radio.channel("messages"),c=Backbone.Radio.channel("sunny"),o=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,n),t.prototype._get_doc_and_render_view=function(n){var t;return this._make_editbar(),t=new n({model:this.root_doc}),this._show_content(t)},t.prototype.clients=c.request("client-collection"),t.prototype.list_clients=function(){return e.e(0,function(n){return function(){var t,o,r;return t=e(157),r=new t({collection:n.clients}),o=n.clients.fetch(),o.done(function(){return n._show_content(r)}),o.fail(function(){return u.request("danger","Failed to load clients.")})}}(this))},t.prototype.new_client=function(){return e.e(0,function(n){return function(){var t;return t=e(86).NewClientView,n._show_content(new t)}}(this))},t.prototype._show_edit_client=function(n,t){var e;return e=new n({model:t}),this._show_content(e)},t.prototype.edit_client=function(n){return e.e(0,function(t){return function(){var o,r,i;return o=e(86).EditClientView,r=c.request("get-client",n),r.has("name")?t._show_edit_client(o,r):(i=r.fetch(),i.done(function(){return t._show_edit_client(o,r)}),i.fail(function(){return u.request("danger","Failed to load client data.")}))}}(this))},t}(i),n.exports=o},113:function(n,t,e){var o,r,i,u,c,a,p,s,l,d,_,f,y,h,w=function(n,t){function e(){this.constructor=n}for(var o in t)m.call(t,o)&&(n[o]=t[o]);return e.prototype=t.prototype,n.prototype=new e,n.__super__=t.prototype,n},m={}.hasOwnProperty;o=e(3),f=e(8),r=e(2),p=e(4),i=e(32).BaseCollection,a=r.Radio.channel("global"),s=r.Radio.channel("messages"),l=r.Radio.channel("sunny"),u=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,n),t.prototype.urlRoot="/api/dev/sunny/clients",t}(r.Model),c=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,n),t.prototype.model=u,t.prototype.url="/api/dev/sunny/clients",t}(r.Collection),y=new c,l.reply("client-collection",function(){return y}),l.reply("new-client",function(){return new u}),l.reply("add-client",function(n){var t,e,o;t=y.create();for(e in n)o=n[e],t.set(e,o);return y.add(t),t.save()}),l.reply("get-client",function(n){var t;return t=y.get(n),void 0===t?new u({id:n}):t}),d=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,n),t.prototype.urlRoot="/api/dev/sunny/yards",t}(r.Model),_=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,n),t.prototype.model=d,t.prototype.url="/api/dev/sunny/yards",t}(r.Collection),h=new _,l.reply("yard-collection",function(){return h}),l.reply("new-yard",function(){return new d}),l.reply("add-yard",function(n){var t,e,o;o=h.create();for(t in n)e=n[t],o.set(t,e);return h.add(o),o.save()}),l.reply("get-yard",function(n){var t;return t=h.get(n),void 0===t?new d({id:n}):t}),n.exports={ClientCollection:c,YardCollection:_}},114:function(n,t,e){var o,r,i,u,c,a=function(n,t){function e(){this.constructor=n}for(var o in t)p.call(t,o)&&(n[o]=t[o]);return e.prototype=t.prototype,n.prototype=new e,n.__super__=t.prototype,n},p={}.hasOwnProperty;o=e(23),e(113),r=e(112),i=Backbone.Radio.channel("global"),c=Backbone.Radio.channel("sunny"),u=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,n),t.prototype.appRoutes={sunny:"list_clients","sunny/clients":"list_clients","sunny/clients/new":"new_client","sunny/clients/edit/:id":"edit_client"},t}(o),i.reply("applet:sunny:route",function(){var n,t;n=new r(i),c.reply("main-controller",function(){return n}),c.reply("edit-client",function(t){return n.edit_client(t)}),t=new u({controller:n})})}});